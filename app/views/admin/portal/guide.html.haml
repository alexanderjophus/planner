.container.py-4.py-lg-5
  .row
    .col.col-md-10.col-lg-8
      %h1 Using the codebar application

      %h2 Managing admin privileges

      %p To manage roles, we use the Rolify gem. At the moment, the only way to add and remove privileges is through Rails console. There are three types of special roles: chapter organisers, meeting organisers and admins.

      %p Chapter organisers can create and modify sponsors and workshops only for chapters that they are permissioned. To make a member into an organiser of a chapter,

      = dot_markdown("`Member.find(:id).add_role(:organiser, Chapter.find(:id))`")

      %p Meeting organisers can create and modify monthlies. To make a member into a meeting organiser,

      = dot_markdown("`Member.find(:id).add_role(:organiser, Meeting)`")

      %p Admins can create and modify sponsors, workshops, meetings and events across all chapters. Admins can also create new chapters. To permission a member as an admin,

      = dot_markdown("`Member.find(:id).add_role(:admin)`")

      %p Similarly, to remove privileges,

      = dot_markdown("`Member.find(:id).remove_role(:organiser, Chapter.find(:id))`")

      = dot_markdown("`Member.find(:id).remove_role(:organiser, Meeting)`")

      = dot_markdown("`Member.find(:id).remove_role(:admin)`")

      %p You can also check if a member has permissions. The second argument for organiser roles can be a specific chapter or :any.

      = dot_markdown("`Member.find(:id).has_role?(:organiser, :any)`")

      %p You can query all of the organisers from a Chapter as well.

      = dot_markdown("`Member.with_role(:organiser, Chapter.find(:13))`")

      %h2 Deleting a member

      %p To delete a member you need to have access to Heroku and the Heroku CLI.

      %p From your terminal run the following command:

      = dot_markdown("`rake member:delete'[email@address.com]'`")

      %p Deleting will anonymise the memberâ€™s data, remove the authentication service so that the member cannot log in again and delete all subscriptions to chapters. It will also update all invitation tokens so any past emails sent with access links to workshops will stop working.
